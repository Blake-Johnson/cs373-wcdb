/*!
	Slimbox v2.05 - The ultimate lightweight Lightbox clone for jQuery
	(c) 2007-2013 Christophe Beyls <http://www.digitalia.be>
	MIT-style license.
*/
!function(t){function e(){var e=I.scrollLeft(),n=I.width();t([b,T]).css("left",e+n/2),v&&t(w).css({left:e,top:I.scrollTop(),width:n,height:I.height()})}function n(n){n?t("object").add(B?"select":"embed").each(function(t,e){A[t]=[e,e.style.visibility],e.style.visibility="hidden"}):(t.each(A,function(t,e){e[0].style.visibility=e[1]}),A=[]);var r=n?"bind":"unbind";I[r]("scroll resize",e),t(document)[r]("keydown",i)}function i(e){var n=e.which,i=t.inArray;return i(n,u.closeKeys)>=0?l():i(n,u.nextKeys)>=0?o():i(n,u.previousKeys)>=0?r():null}function r(){return s(p)}function o(){return s(f)}function s(t){return t>=0&&(q=t,m=h[q][0],p=(q||(u.loop?h.length:0))-1,f=(q+1)%h.length||(u.loop?0:-1),d(),b.className="lbLoading",M=new Image,M.onload=a,M.src=m),!1}function a(){b.className="";var e=window.innerWidth-20,n=window.innerHeight-120;if(e>n)var i=n;else var i=e;var r=M.width,o=M.height;r>o?(o=i*o/r,r=i):(r=i*r/o,o=i),M.width>r||M.height>o?(t(L).css({backgroundImage:"url("+m+")",backgroundSize:""+r+"px "+o+"px",visibility:"hidden",display:""}),t(E).width(r),t([E,k,$]).height(o)):(t(L).css({backgroundImage:"url("+m+")",backgroundSize:"",visibility:"hidden",display:""}),t(E).width(M.width),t([E,k,$]).height(M.height)),t(x).html(h[q][1]||""),t(C).html((h.length>1&&u.counterText||"").replace(/{x}/,q+1).replace(/{y}/,h.length)),p>=0&&(R.src=h[p][0]),f>=0&&(z.src=h[f][0]),y=L.offsetWidth,_=L.offsetHeight;var s=Math.max(0,g-_/2);b.offsetHeight!=_&&t(b).animate({height:_,top:s},u.resizeDuration,u.resizeEasing),b.offsetWidth!=y&&t(b).animate({width:y,marginLeft:-y/2},u.resizeDuration,u.resizeEasing),t(b).queue(function(){t(T).css({width:y,top:s+_,marginLeft:-y/2,visibility:"hidden",display:""}),t(L).css({display:"none",visibility:"",opacity:""}).fadeIn(u.imageFadeDuration,c)})}function c(){p>=0&&t(k).show(),f>=0&&t($).show(),t(S).css("marginTop",-S.offsetHeight).animate({marginTop:0},u.captionAnimationDuration),T.style.visibility=""}function d(){M.onload=null,M.src=R.src=z.src=m,t([b,L,S]).stop(!0),t([k,$,L,T]).hide()}function l(){return q>=0&&(d(),q=p=f=-1,t(b).hide(),t(w).stop().fadeOut(u.overlayFadeDuration,n)),!1}var u,h,m,p,f,v,g,y,_,w,b,L,E,k,$,T,S,x,C,I=t(window),q=-1,B=!window.XMLHttpRequest,A=[],M=(document.documentElement,{}),R=new Image,z=new Image;t(function(){t("body").append(t([w=t('<div id="lbOverlay" />').click(l)[0],b=t('<div id="lbCenter" />')[0],T=t('<div id="lbBottomContainer" />')[0]]).css("display","none")),L=t('<div id="lbImage" />').appendTo(b).append(E=t('<div style="position: relative;" />').append([k=t('<a id="lbPrevLink" href="#" />').click(r)[0],$=t('<a id="lbNextLink" href="#" />').click(o)[0]])[0])[0],S=t('<div id="lbBottom" />').appendTo(T).append([t('<a id="lbCloseLink" href="#" />').click(l)[0],x=t('<div id="lbCaption" />')[0],C=t('<div id="lbNumber" />')[0],t('<div style="clear: both;" />')[0]])[0]}),t.slimbox=function(i,r,o){return u=t.extend({loop:!1,overlayOpacity:.8,overlayFadeDuration:400,resizeDuration:400,resizeEasing:"swing",initialWidth:250,initialHeight:250,imageFadeDuration:400,captionAnimationDuration:400,counterText:"Image {x} of {y}",closeKeys:[27,88,67],previousKeys:[37,80],nextKeys:[39,78]},o),"string"==typeof i&&(i=[[i,r]],r=0),g=I.scrollTop()+I.height()/2,y=u.initialWidth,_=u.initialHeight,t(b).css({top:Math.max(0,g-_/2),width:y,height:_,marginLeft:-y/2}).show(),v=B||w.currentStyle&&"fixed"!=w.currentStyle.position,v&&(w.style.position="absolute"),t(w).css("opacity",u.overlayOpacity).fadeIn(u.overlayFadeDuration),e(),n(1),h=i,u.loop=u.loop&&h.length>1,s(r)},t.fn.slimbox=function(e,n,i){n=n||function(t){return[t.href,t.title]},i=i||function(){return!0};var r=this;return r.unbind("click").click(function(){var o,s,a=this,c=0,d=0;for(o=t.grep(r,function(t,e){return i.call(a,t,e)}),s=o.length;s>d;++d)o[d]==a&&(c=d),o[d]=n(o[d],d);return t.slimbox(o,c,e)})}}(jQuery),/android|iphone|ipod|series60|symbian|windows ce|blackberry/i.test(navigator.userAgent)||jQuery(function(t){t("a[rel^='lightbox']").slimbox({overlayOpacity:0,overlayFadeDuration:0,resizeDuration:200,imageFadeDuration:200,captionAnimationDuration:100,closeKeys:[27],previousKeys:[],nextKeys:[]},null,function(t){return this==t||this.rel.length>8&&this.rel==t.rel})});