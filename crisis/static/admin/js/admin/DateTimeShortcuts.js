var DateTimeShortcuts={calendars:[],calendarInputs:[],clockInputs:[],calendarDivName1:"calendarbox",calendarDivName2:"calendarin",calendarLinkName:"calendarlink",clockDivName:"clockbox",clockLinkName:"clocklink",shortCutsClass:"datetimeshortcuts",admin_media_prefix:"",init:function(){DateTimeShortcuts.admin_media_prefix=void 0!=window.__admin_media_prefix__?window.__admin_media_prefix__:"/missing-admin-media-prefix/";var e=document.getElementsByTagName("input");for(i=0;i<e.length;i++){var t=e[i];"text"==t.getAttribute("type")&&t.className.match(/vTimeField/)?DateTimeShortcuts.addClock(t):"text"==t.getAttribute("type")&&t.className.match(/vDateField/)&&DateTimeShortcuts.addCalendar(t)}},addClock:function(e){var t=DateTimeShortcuts.clockInputs.length;DateTimeShortcuts.clockInputs[t]=e;var n=document.createElement("span");n.className=DateTimeShortcuts.shortCutsClass,e.parentNode.insertBefore(n,e.nextSibling);var a=document.createElement("a");a.setAttribute("href","javascript:DateTimeShortcuts.handleClockQuicklink("+t+", new Date().strftime('"+get_format("TIME_INPUT_FORMATS")[0]+"'));"),a.appendChild(document.createTextNode(gettext("Now")));var r=document.createElement("a");r.setAttribute("href","javascript:DateTimeShortcuts.openClock("+t+");"),r.id=DateTimeShortcuts.clockLinkName+t,quickElement("img",r,"","src",DateTimeShortcuts.admin_media_prefix+"img/icon_clock.gif","alt",gettext("Clock")),n.appendChild(document.createTextNode(" ")),n.appendChild(a),n.appendChild(document.createTextNode(" | ")),n.appendChild(r);var i=document.createElement("div");i.style.display="none",i.style.position="absolute",i.className="clockbox module",i.setAttribute("id",DateTimeShortcuts.clockDivName+t),document.body.appendChild(i),addEvent(i,"click",DateTimeShortcuts.cancelEventPropagation),quickElement("h2",i,gettext("Choose a time"));var o=quickElement("ul",i,"");o.className="timelist";var s=get_format("TIME_INPUT_FORMATS")[0];quickElement("a",quickElement("li",o,""),gettext("Now"),"href","javascript:DateTimeShortcuts.handleClockQuicklink("+t+", new Date().strftime('"+s+"'));"),quickElement("a",quickElement("li",o,""),gettext("Midnight"),"href","javascript:DateTimeShortcuts.handleClockQuicklink("+t+", new Date(1970,1,1,0,0,0,0).strftime('"+s+"'));"),quickElement("a",quickElement("li",o,""),gettext("6 a.m."),"href","javascript:DateTimeShortcuts.handleClockQuicklink("+t+", new Date(1970,1,1,6,0,0,0).strftime('"+s+"'));"),quickElement("a",quickElement("li",o,""),gettext("Noon"),"href","javascript:DateTimeShortcuts.handleClockQuicklink("+t+", new Date(1970,1,1,12,0,0,0).strftime('"+s+"'));");var c=quickElement("p",i,"");c.className="calendar-cancel",quickElement("a",c,gettext("Cancel"),"href","javascript:DateTimeShortcuts.dismissClock("+t+");"),django.jQuery(document).bind("keyup",function(e){27==e.which&&(DateTimeShortcuts.dismissClock(t),e.preventDefault())})},openClock:function(e){var t=document.getElementById(DateTimeShortcuts.clockDivName+e),n=document.getElementById(DateTimeShortcuts.clockLinkName+e);t.style.left="rtl"!=getStyle(document.body,"direction")?findPosX(n)+17+"px":findPosX(n)-110+"px",t.style.top=Math.max(0,findPosY(n)-30)+"px",t.style.display="block",addEvent(window.document,"click",function(){return DateTimeShortcuts.dismissClock(e),!0})},dismissClock:function(e){document.getElementById(DateTimeShortcuts.clockDivName+e).style.display="none",window.document.onclick=null},handleClockQuicklink:function(e,t){DateTimeShortcuts.clockInputs[e].value=t,DateTimeShortcuts.clockInputs[e].focus(),DateTimeShortcuts.dismissClock(e)},addCalendar:function(e){var t=DateTimeShortcuts.calendars.length;DateTimeShortcuts.calendarInputs[t]=e;var n=document.createElement("span");n.className=DateTimeShortcuts.shortCutsClass,e.parentNode.insertBefore(n,e.nextSibling);var a=document.createElement("a");a.setAttribute("href","javascript:DateTimeShortcuts.handleCalendarQuickLink("+t+", 0);"),a.appendChild(document.createTextNode(gettext("Today")));var r=document.createElement("a");r.setAttribute("href","javascript:DateTimeShortcuts.openCalendar("+t+");"),r.id=DateTimeShortcuts.calendarLinkName+t,quickElement("img",r,"","src",DateTimeShortcuts.admin_media_prefix+"img/icon_calendar.gif","alt",gettext("Calendar")),n.appendChild(document.createTextNode(" ")),n.appendChild(a),n.appendChild(document.createTextNode(" | ")),n.appendChild(r);var i=document.createElement("div");i.style.display="none",i.style.position="absolute",i.className="calendarbox module",i.setAttribute("id",DateTimeShortcuts.calendarDivName1+t),document.body.appendChild(i),addEvent(i,"click",DateTimeShortcuts.cancelEventPropagation);var o=quickElement("div",i,""),s=quickElement("a",o,"<","href","javascript:DateTimeShortcuts.drawPrev("+t+");");s.className="calendarnav-previous";var c=quickElement("a",o,">","href","javascript:DateTimeShortcuts.drawNext("+t+");");c.className="calendarnav-next";var d=quickElement("div",i,"","id",DateTimeShortcuts.calendarDivName2+t);d.className="calendar",DateTimeShortcuts.calendars[t]=new Calendar(DateTimeShortcuts.calendarDivName2+t,DateTimeShortcuts.handleCalendarCallback(t)),DateTimeShortcuts.calendars[t].drawCurrent();var l=quickElement("div",i,"");l.className="calendar-shortcuts",quickElement("a",l,gettext("Yesterday"),"href","javascript:DateTimeShortcuts.handleCalendarQuickLink("+t+", -1);"),l.appendChild(document.createTextNode(" | ")),quickElement("a",l,gettext("Today"),"href","javascript:DateTimeShortcuts.handleCalendarQuickLink("+t+", 0);"),l.appendChild(document.createTextNode(" | ")),quickElement("a",l,gettext("Tomorrow"),"href","javascript:DateTimeShortcuts.handleCalendarQuickLink("+t+", +1);");var u=quickElement("p",i,"");u.className="calendar-cancel",quickElement("a",u,gettext("Cancel"),"href","javascript:DateTimeShortcuts.dismissCalendar("+t+");"),django.jQuery(document).bind("keyup",function(e){27==e.which&&(DateTimeShortcuts.dismissCalendar(t),e.preventDefault())})},openCalendar:function(e){var t=document.getElementById(DateTimeShortcuts.calendarDivName1+e),n=document.getElementById(DateTimeShortcuts.calendarLinkName+e),a=DateTimeShortcuts.calendarInputs[e];if(a.value){var r=a.value.split("-"),i=r[0],o=parseFloat(r[1]);i.match(/\d\d\d\d/)&&o>=1&&12>=o&&DateTimeShortcuts.calendars[e].drawDate(o,i)}t.style.left="rtl"!=getStyle(document.body,"direction")?findPosX(n)+17+"px":findPosX(n)-180+"px",t.style.top=Math.max(0,findPosY(n)-75)+"px",t.style.display="block",addEvent(window.document,"click",function(){return DateTimeShortcuts.dismissCalendar(e),!0})},dismissCalendar:function(e){document.getElementById(DateTimeShortcuts.calendarDivName1+e).style.display="none",window.document.onclick=null},drawPrev:function(e){DateTimeShortcuts.calendars[e].drawPreviousMonth()},drawNext:function(e){DateTimeShortcuts.calendars[e].drawNextMonth()},handleCalendarCallback:function(e){return format=get_format("DATE_INPUT_FORMATS")[0],format=format.replace("\\","\\\\"),format=format.replace("\r","\\r"),format=format.replace("\n","\\n"),format=format.replace(" ","\\t"),format=format.replace("'","\\'"),["function(y, m, d) { DateTimeShortcuts.calendarInputs[",e,"].value = new Date(y, m-1, d).strftime('",format,"');DateTimeShortcuts.calendarInputs[",e,"].focus();document.getElementById(DateTimeShortcuts.calendarDivName1+",e,").style.display='none';}"].join("")},handleCalendarQuickLink:function(e,t){var n=new Date;n.setDate(n.getDate()+t),DateTimeShortcuts.calendarInputs[e].value=n.strftime(get_format("DATE_INPUT_FORMATS")[0]),DateTimeShortcuts.calendarInputs[e].focus(),DateTimeShortcuts.dismissCalendar(e)},cancelEventPropagation:function(e){e||(e=window.event),e.cancelBubble=!0,e.stopPropagation&&e.stopPropagation()}};addEvent(window,"load",DateTimeShortcuts.init);